<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Rapport {{monthsName[month]}} {{year}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content style="overflow-y: scroll;">
  <ion-card class="smallreport-card" *ngIf="notCompleteMonth" color='warning'>
    <ion-card-content>
      Ce mois n'a pas été totalement synchronisé, le rapport est donc incomplet.
      <span *ngIf="month == currentMonth && year == currentYear">
        C'est normal dans la mesure où ce rapport reflète le mois courant, qui n'est pas encore finalisé.
      </span>
    </ion-card-content>
  </ion-card>

  <ion-card class="smallreport-card">
    <ion-card-content>
      <h1>{{sumCO2.toFixed(1)}} kg</h1>
      d'équivalent CO2 émis en conséquence de vos déplacements en {{monthsName[month].toLowerCase()}} {{year}}

      <ion-list>
        <ion-item>
          <ion-icon name="car" slot="end"></ion-icon>
          <ion-label class="ion-text-wrap">
              dont {{sumCar.toFixed(1)}} kg lié<span *ngIf="sumCar > 1">s</span> à vos déplacement en voiture
              <ion-progress-bar [value]="sumCar/sumCO2"></ion-progress-bar>
          </ion-label>
        </ion-item>

        <ion-item *ngIf="sumPlane > 0.0">
          <ion-icon name="airplane" slot="end"></ion-icon>
          <ion-label class="ion-text-wrap">
              dont {{sumPlane.toFixed(1)}} kg lié<span *ngIf="sumPlane > 1">s</span> à vos déplacement en avion
              <ion-progress-bar [value]="sumPlane/sumCO2"></ion-progress-bar>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <ion-card class="smallreport-card" *ngIf="!notCompleteMonth" [color]="percentageMoreThanAvgFrenchPerson > 1 ? 'danger' : 'success'">
    <ion-card-content>
      C'est
      <h1>
        {{percentageMoreThanAvgFrenchPerson > 1 ? "+" : ""}}{{percentageMoreThanAvgFrenchPerson.toFixed(0)}}%
      </h1>
      par rapport à un français moyen.
      <span *ngIf="percentageMoreThanAvgFrenchPerson > 1">:'(</span>
      <span *ngIf="percentageMoreThanAvgFrenchPerson < 1">:)</span>
    </ion-card-content>
  </ion-card>
    <ion-card class="funny-fact-card">
      <ion-card-content *ngIf="funnyFact === 0">
        C'est
        <h1>
          {{(sumCO2/6.90).toFixed(1)}}
        </h1>
        fois ce que pète une vache chaque jour.
        <p><small>On estime en effet qu'une vache emet environ 90 kg de méthane (CH4) par an.</small></p>
        <!-- source: https://www.agrireseau.net/agroenvironnement/documents/chouinard.pdf --> 
      </ion-card-content>

      <ion-card-content *ngIf="funnyFact === 1">
        C'est
        <h1>
          {{(sumCO2/1000*534).toFixed(1)}}
        </h1>
        m<sup>3</sup> de CO<sub>2</sub> à 15°C.
        <!-- source: https://www.consoglobe.com/represente-tonne-c02-4127-cg --> 
      </ion-card-content>

      <ion-card-content *ngIf="funnyFact === 2">
        C'est
        <h1>
          {{(sumCO2/7.84*1000).toFixed(1)}}
        </h1>
        smartphones rechargés.
        <!-- source: https://www.epa.gov/energy/greenhouse-gases-equivalencies-calculator-calculations-and-references#smartphones --> 
      </ion-card-content>

      <ion-card-content *ngIf="funnyFact === 3">
        C'est ce qu'absorbent
        <h1>
          {{(sumCO2/(25/12)).toFixed(1)}}
        </h1>
        arbres en CO2 sur la période.
        <p><small>On estime en effet qu'un arbre commun absorbe entre 20 et 30 kg de CO2 par an.</small></p>
        
      </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      Jour par jour
    </ion-card-header>
    <ion-card-content>
      <canvas #dayByDayCanvas></canvas>
    </ion-card-content>
  </ion-card>
</ion-content>
